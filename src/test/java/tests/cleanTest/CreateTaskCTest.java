package tests.cleanTest;

import jdk.jfr.Description;
import org.junit.jupiter.api.*;
import pages.*;
import session.Session;

import java.util.Date;

public class CreateTaskCTest {
    @BeforeEach
    public void openBrowser(){
        Session.getSession().getBrowser().get("http://todo.ly");
    }

    @Test
    @Description("Verify create task success")
    @Order(1)
    public void verifyCreateTaskSuccess(){
        String user = "valid@username.com";
        String pass = "1234";

        HomePage homePage = new HomePage();
        homePage.loginButton.click();

        LoginSection loginSection = new LoginSection();
        loginSection.userTextBox.sendKeys(user);
        loginSection.passwordTextBox.sendKeys(pass);
        loginSection.loginButton.click();

        MenuSection menuSection = new MenuSection();
        Assertions.assertTrue(menuSection.logoutButton.isDisplayed());

        LeftMenuSection leftMenuSection = new LeftMenuSection();
        leftMenuSection.inboxButton.click();

        TaskContentSection taskContentSection = new TaskContentSection();
        String taskName = "Task"+ new Date().getTime();
        taskContentSection.addNewTaskWithName(taskName);
        Assertions.assertTrue(taskContentSection.isTaskWithName(taskName).isDisplayed());
    }
    @AfterEach
    public void closeBrowser(){
        Session.getSession().getBrowser().quit();
    }
}
